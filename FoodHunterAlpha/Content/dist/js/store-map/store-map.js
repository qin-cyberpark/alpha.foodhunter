function StoreMap(n,o,t){var e=this;e.defaultSetting={center:{lat:-36.8576757,lng:174.7591993},zoom:13,mapTypeControl:!1},e.container=n,e.stores=o,e.setting=$.extend({},e.defaultSetting,t),e.map=null,e.init=function(){e.map=new google.maps.Map(e.container,e.setting),e.putCurrentPositionMarker(),e.putStoreMarker(e.stores)},e.infoWindow=new google.maps.InfoWindow({}),e.putCurrentPositionMarker=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){var o={lat:n.coords.latitude,lng:n.coords.longitude};e.map.setCenter(o);var t=new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lng)});t.addListener("click",function(){e.infoWindow.setContent('<div class="map-marker-info">you are here</div>'),e.infoWindow.open(e.map,t)}),t.setMap(e.map)},function(){})},e.putStoreMarker=function(n){$.each(n,function(n,o){$.each(o.stores,function(n,t){var i=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),title:t.n,icon:o.icon});i.addListener("click",function(){var n='<div class="map-marker-info">'+t.n;t.nId&&(n+='<a class="btn btn-primary" onclick="window.location=\'/store/'+t.nId+"'\">Select</a></div>"),e.infoWindow.setContent(n),e.infoWindow.open(e.map,i)}),i.setMap(e.map)})})}}function showMap(){new StoreMap($("#map")[0],STORE_MAP_MARKERS).init()}